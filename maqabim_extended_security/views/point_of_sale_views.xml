<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<record id="pos_config_kanban_inherit_maqabim_extended_security" model="ir.ui.view">
	    <field name="name">pos_config_kanban_inherit_maqabim_extended_security</field>
	    <field name="model">pos.config</field>
	    <field name="inherit_id" ref="point_of_sale.view_pos_config_kanban"/>
	    <field name="arch" type="xml">
	    	<field name="currency_id" position="after">
	    		<field name="restrict_closing"/>
	    	</field>
	    	<xpath expr="//button[@name='open_existing_session_cb'][2]" position="attributes">
	    		<attribute name="t-if">_.contains(['opened', 'closing_control'], record.current_session_state.raw_value) &amp;&amp; !record.restrict_closing.raw_value</attribute>
	    	</xpath>
	    	<xpath expr="//div[hasclass('o_kanban_manage_button_section')]" position="attributes">
                <attribute name="groups">point_of_sale.group_pos_manager</attribute>
            </xpath>
	    </field>
	</record>
	<record id="pos_session_form_inherit_maqabim_extended_security" model="ir.ui.view">
	    <field name="name">pos_session_form_inherit_maqabim_extended_security</field>
	    <field name="model">pos.session</field>
	    <field name="inherit_id" ref="point_of_sale.view_pos_session_form"/>
	    <field name="arch" type="xml">
	    	<xpath expr="//field[@name='cash_register_id']" position="after">
	    		<field name="restrict_session_closing" invisible="1"/>
	    	</xpath>
	    	<xpath expr="//button[@name='action_pos_session_closing_control']" position="attributes">
	    		<attribute name="attrs">{'invisible': [ '|', ('restrict_session_closing', '=', True), '|', '&amp;',('state', '!=', 'closing_control'), ('rescue', '=', False),'&amp;',('state', '=', 'closed'), ('rescue', '=', True)]}</attribute>
	    	</xpath>
	    </field>
	</record>
</odoo>