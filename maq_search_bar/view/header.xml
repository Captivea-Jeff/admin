<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="products_inherit_search" inherit_id="theme_loftspace_sale.products">
        <xpath expr="//t[@t-call='theme_loftspace_sale.search']" position="replace">
            <div class="col-md-12 mb32">
                <div class="as-search">
                    <form action='/shop' method="get">
                        <div class="input-group">
                            <div class="oe_search">
                                <input type="text" name="search"
                                       placeholder="Search" autocomplete="off"
                                       class="form-control pagination form-inline col-md-12"
                                       t-att-value="search"/>
                            </div>
                            <span class="input-group-btn">
                                <button class="btn btn-default oe_search_button">
                                    <i class="fa fa-search"/>
                                </button>
                            </span>
                        </div>
                    </form>
                </div>
            </div>
            <div class="container">
                <div id="algolia-autocomplete-container"
                     style="position: relative;">
                    <span class="aa-dropdown-menu aa-with-products aa-with-0 hide"
                          role="listbox" id="algolia-autocomplete-listbox-0">
                    </span>
                </div>
            </div>
        </xpath>
    </template>
    <template id="product_search_inherit_maq" inherit_id="website_sale.product">
        <xpath expr="//t[@t-call='website_sale.search']" position="replace"/>
        <xpath expr="//div[hasclass('row')]" position="after">
            <div class="row">
                <div class="col-md-12 mb32">
                    <div class="as-search">
                        <form action='/shop' method="get">
                            <div class="input-group">
                                <div class="oe_search">
                                    <input type="text" name="search"
                                           placeholder="Search" autocomplete="off"
                                           class="form-control pagination form-inline col-md-12"
                                           t-att-value="search"/>
                                </div>
                                <span class="input-group-btn">
                                    <button class="btn btn-default oe_search_button">
                                        <i class="fa fa-search"/>
                                    </button>
                                </span>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="container">
                <div id="algolia-autocomplete-container"
                     style="position: relative;">
                    <span class="aa-dropdown-menu aa-with-products aa-with-0 hide"
                          role="listbox" id="algolia-autocomplete-listbox-0">
                    </span>
                </div>
            </div>
        </xpath>
    </template>
    <template id="parent_category_name">
        <t t-if="p_categ.parent_id">
            <t t-set="p_categ"
               t-value="p_categ.parent_id"/>
            <t t-call="maq_search_bar.parent_category_name"/>
        </t>
        <span t-esc="p_categ.name"/>/
    </template>
    <template id="website_search_result">
        <div class="autocomplete-wrapper">
            <div
                    class="col-md-9 col-md-push-3 col-sm-12 col-xs-12 mb8 mt16 left-border">
                <t t-if="product_count &gt; 0">
                    <div class="row">
                        <div class="aa-dataset-products col-md-6"
                             style="min-height: 0px;" t-foreach="product_ids"
                             t-as="prod_id">
                            <a class="row search_product"
                               t-att-href="'/shop/product/%s' % slug(prod_id)">
                                <div
                                        class="col-md-3 col-sm-3 col-xs-3 mb8 mt8">
                                    <!--<a itemprop="url"-->
                                    <!--t-att-href="'/wholesale/product/%s' % slug(prod_id)">-->
                                    <span itemprop="image"
                                          t-attf-content="{{request.httprequest.url_root}}web/image/product.template/{{prod_id.id}}/image"
                                          t-field="prod_id.image"
                                          t-options="{'widget': 'image', 'resize': None if product_image_big else '50x50'}"
                                          t-att-alt="prod_id.name"/>
                                    <!--</a>-->
                                </div>
                                <div
                                        class="col-md-9 col-sm-9 col-xs-9 mb8 mt8 prod_detail">
                                    <!--<a itemprop="url"-->
                                    <!--t-att-href="'/wholesale/product/%s' % slug(prod_id)">-->
                                    <strong>
                                        <span t-esc="prod_id.name"/>
                                    </strong>
                                    <!--</a>-->
                                    <!--<div class="description">
                                        <span t-raw="prod_id.description_sale"/>
                                    </div>-->
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="row">
                        <div
                                class="col-md-12 col-sm-12 col-xs-12 search_block_right_footer text-center mt16 mb16">
                            <strong>See product in
                                <a class="text-primary"
                                   t-att-href="'/shop?search=' + search_keyword">
                                    All departments
                                </a>
                                (<span t-esc="product_count"/>)
                            </strong>
                        </div>
                    </div>
                </t>
                <t t-else="">
                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12 mt16 mb16">
                            <strong>No match found!</strong>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12 search_block_right_footer mt16 mb16">
                            <strong>
                                <a class="text-primary"
                                   href="'/shop">
                                    See All product
                                </a>
                            </strong>
                        </div>
                    </div>
                </t>
            </div>
            <div class="col-md-3 col-md-pull-9 col-sm-12 col-xs-12 mb16 mt16">
                <div class="category-header">
                    <strong>
                        <span>CATEGORIES</span>
                    </strong>
                </div>
                <ul class="other-sections"
                    style="min-height: 0px;">
                    <li class="mt8" t-foreach="category_ids" t-as="category">
                        <a t-att-href="'/shop/category/' + slug(category)">
                            <t t-if="category.parent_id">
                                <t t-set="p_categ"
                                   t-value="category.parent_id"/>
                                <t
                                        t-call="maq_search_bar.parent_category_name"/>
                            </t>
                            <span t-esc="category.name"/>
                        </a>

                    </li>
                    <li class="mt16" t-if="not category_ids">
                        <span>No Results.</span>
                    </li>
                </ul>
            </div>

        </div>
    </template>
</odoo>
